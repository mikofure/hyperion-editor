<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MikoEditor Demo</title>
    <link rel="stylesheet" href="./index.css">
</head>
<body class="font-sans m-0 p-5 bg-gray-100">
    <div class="text-center mb-8">
        <h1 class="text-gray-800 mb-2 text-3xl font-bold">üéØ MikoEditor</h1>
        <p class="text-gray-600 text-base">A modern text editor library built with TypeScript</p>
    </div>
    
    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-5">
        <!-- Dark Theme Editor -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="bg-gray-800 text-white px-5 py-4 border-b border-gray-600">
                <h3 class="m-0 text-base font-medium">üåô Dark Theme - TypeScript</h3>
            </div>
            <div class="px-5 py-4 bg-gray-50 border-b border-gray-200 flex flex-wrap gap-2">
                <button onclick="insertSampleTS()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Insert Sample</button>
                <button onclick="clearEditor1()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Clear</button>
                <button onclick="undoEditor1()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Undo</button>
                <button onclick="redoEditor1()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Redo</button>
                <select onchange="changeLanguage1(this.value)" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">
                    <option value="typescript">TypeScript</option>
                    <option value="javascript">JavaScript</option>
                    <option value="python">Python</option>
                    <option value="json">JSON</option>
                </select>
            </div>
            <div id="editor1" class="h-96 overflow-hidden"></div>
        </div>
        
        <!-- Light Theme Editor -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="bg-gray-800 text-white px-5 py-4 border-b border-gray-600">
                <h3 class="m-0 text-base font-medium">‚òÄÔ∏è Light Theme - Python</h3>
            </div>
            <div class="px-5 py-4 bg-gray-50 border-b border-gray-200 flex flex-wrap gap-2">
                <button onclick="insertSamplePython()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Insert Sample</button>
                <button onclick="clearEditor2()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Clear</button>
                <button onclick="undoEditor2()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Undo</button>
                <button onclick="redoEditor2()" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">Redo</button>
                <select onchange="changeLanguage2(this.value)" class="px-3 py-1.5 border border-gray-300 bg-white rounded cursor-pointer text-sm hover:bg-gray-50">
                    <option value="python">Python</option>
                    <option value="typescript">TypeScript</option>
                    <option value="javascript">JavaScript</option>
                    <option value="json">JSON</option>
                </select>
            </div>
            <div id="editor2" class="h-96 overflow-hidden"></div>
        </div>
    </div>
    
    <div class="mt-8 bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-gray-800 mb-5 text-2xl font-bold">‚ú® Features</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
            <div class="p-5 border border-gray-200 rounded bg-gray-50">
                <h3 class="text-gray-800 mb-2 text-base font-semibold">üé® Syntax Highlighting</h3>
                <p class="text-gray-600 text-sm leading-relaxed m-0">Built-in support for JavaScript, TypeScript, Python, and JSON with extensible language definitions.</p>
            </div>
            <div class="p-5 border border-gray-200 rounded bg-gray-50">
                <h3 class="text-gray-800 mb-2 text-base font-semibold">‚å®Ô∏è Full Keyboard Support</h3>
                <p class="text-gray-600 text-sm leading-relaxed m-0">Complete keyboard navigation, text selection, and editing with customizable key bindings.</p>
            </div>
            <div class="p-5 border border-gray-200 rounded bg-gray-50">
                <h3 class="text-gray-800 mb-2 text-base font-semibold">üîÑ Undo/Redo</h3>
                <p class="text-gray-600 text-sm leading-relaxed m-0">Unlimited undo/redo functionality with complete action history management.</p>
            </div>
            <div class="p-5 border border-gray-200 rounded bg-gray-50">
                <h3 class="text-gray-800 mb-2 text-base font-semibold">üéØ Advanced Cursor</h3>
                <p class="text-gray-600 text-sm leading-relaxed m-0">Sophisticated cursor positioning, text selection, and multi-line operations.</p>
            </div>
            <div class="p-5 border border-gray-200 rounded bg-gray-50">
                <h3 class="text-gray-800 mb-2 text-base font-semibold">üé® Customizable Themes</h3>
                <p class="text-gray-600 text-sm leading-relaxed m-0">Built-in dark and light themes with full customization support for colors and styling.</p>
            </div>
            <div class="p-5 border border-gray-200 rounded bg-gray-50">
                <h3 class="text-gray-800 mb-2 text-base font-semibold">üöÄ High Performance</h3>
                <p class="text-gray-600 text-sm leading-relaxed m-0">Canvas-based rendering for smooth scrolling and editing, even with large documents.</p>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { EditorView, defaultTheme, lightTheme } from './index.ts';
        
        // Sample code snippets
        const samples = {
            typescript: `// TypeScript Example
interface User {
  id: number;
  name: string;
  email: string;
}

function createUser(data: Partial<User>): User {
  return {
    id: Math.random(),
    name: data.name || 'Anonymous',
    email: data.email || 'user@example.com'
  };
}

const user = createUser({
  name: 'John Doe',
  email: 'john@example.com'
});

console.log('Created user:', user);`,
            
            javascript: `// JavaScript Example
class Calculator {
  constructor() {
    this.result = 0;
  }
  
  add(value) {
    this.result += value;
    return this;
  }
  
  multiply(value) {
    this.result *= value;
    return this;
  }
  
  getValue() {
    return this.result;
  }
}

const calc = new Calculator();
const result = calc.add(5).multiply(3).getValue();
console.log('Result:', result); // 15`,

            python: `# Python Example
class DataProcessor:
    def __init__(self, data):
        self.data = data
        self.processed = False
    
    def filter_data(self, condition):
        """Filter data based on condition"""
        self.data = [item for item in self.data if condition(item)]
        return self
    
    def transform(self, func):
        """Transform each item in the data"""
        self.data = [func(item) for item in self.data]
        self.processed = True
        return self
    
    def get_result(self):
        return {
            'data': self.data,
            'count': len(self.data),
            'processed': self.processed
        }

# Usage example
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
processor = DataProcessor(numbers)

result = processor
    .filter_data(lambda x: x % 2 == 0)  # Even numbers only
    .transform(lambda x: x ** 2)        # Square each number
    .get_result()

print(f"Processed {result['count']} items:", result['data'])`,

            json: `{
  "name": "mikoeditor",
  "version": "1.0.0",
  "description": "A modern text editor library",
  "main": "dist/index.js",
  "scripts": {
    "build": "tsc",
    "dev": "tsc --watch",
    "test": "echo \\"Tests not configured yet\\""
  },
  "keywords": [
    "text-editor",
    "typescript",
    "syntax-highlighting",
    "canvas",
    "editor"
  ],
  "author": "MikoEditor Team",
  "license": "MIT",
  "dependencies": {},
  "devDependencies": {
    "typescript": "^5.0.0"
  }
}`
        };
        
        // Initialize editors
        let editor1, editor2;
        
        function initEditors() {
            // Dark theme editor
            const container1 = document.getElementById('editor1');
            editor1 = new EditorView(container1, samples.typescript, defaultTheme);
            editor1.setLanguage('typescript');
            
            // Light theme editor  
            const container2 = document.getElementById('editor2');
            editor2 = new EditorView(container2, samples.python, lightTheme);
            editor2.setLanguage('python');
            
            // Make functions available globally
            window.insertSampleTS = () => insertSample(editor1, 'typescript');
            window.insertSamplePython = () => insertSample(editor2, 'python');
            window.clearEditor1 = () => clearEditor(editor1);
            window.clearEditor2 = () => clearEditor(editor2);
            window.undoEditor1 = () => editor1.getEditor().undo();
            window.redoEditor1 = () => editor1.getEditor().redo();
            window.undoEditor2 = () => editor2.getEditor().undo();
            window.redoEditor2 = () => editor2.getEditor().redo();
            window.changeLanguage1 = (lang) => changeLanguage(editor1, lang);
            window.changeLanguage2 = (lang) => changeLanguage(editor2, lang);
        }
        
        function insertSample(editor, defaultLang) {
            const currentLang = editor.getLanguage();
            const sample = samples[currentLang] || samples[defaultLang];
            editor.getEditor().insertText('\\n\\n' + sample);
        }
        
        function clearEditor(editor) {
            editor.getEditor().setContent('');
        }
        
        function changeLanguage(editor, lang) {
            editor.setLanguage(lang);
            const sample = samples[lang];
            if (sample) {
                editor.getEditor().setContent(sample);
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initEditors);
    </script>
</body>
</html>